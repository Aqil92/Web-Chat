{"version":3,"sources":["webpack:///./src/main.js","webpack:///./src/app/app.js","webpack:///./src/app/signaling.js","webpack:///./src/app/logger.js","webpack:///./src/app/chat.js","webpack:///./src/public/message.html","webpack:///./src/public/system-message.html","webpack:///./src/app/gui-manager.js","webpack:///./src/app/modal-manager.js","webpack:///./src/public ^\\.\\/.*\\.html$","webpack:///./src/public/answer.html","webpack:///./src/public/index.html","webpack:///./src/public/offer.html","webpack:///./src/app/events-loader.js","webpack:///./src/styles/app.scss"],"names":["app","logLevel","ERROR","servers","iceServers","url","constraints","ordered","App","signaling","config","logger","peerData","gui","chat","SignalingData","events","candidatesLoaded","offerLoaded","answerLoaded","Signaling","id","event","caller","type","OFFER","onOffer","apply","ANSWER","onAnswer","CANDIDATE","onCandidate","CONNECT","onConnect","DISCONNECT","onDisconnect","data","push","Logger","_logLevel","trace","method","OFF","WARN","INFO","now","Date","getHours","getMinutes","Error","logToChat","toString","message","template","require","replace","document","querySelector","innerHTML","scrollDown","value","Chat","inputSelector","subscribeEvents","init","sendBtn","getElementById","addEventListener","onSend","bind","onEnter","on","OPEN","onOpen","CLOSE","onClose","DATA","onData","onError","keyCode","clearInput","send","addMessage","info","error","incoming","elem","scrollTop","scrollHeight","GuiManager","token","getToken","load","onMessage","connect","onHide","$","modal","loadBtn","onLoad","modalLoop","i","setTimeout","showShareModal","window","location","hash","substring","ModalManager","templateName","JSON","stringify","href","encodeURIComponent","selector","callback","EventsLoader","parse","decodeURIComponent","length"],"mappings":";;;;;;;AAQA;;;;AACA;;;;AATA;;;;;;;;AAWA,KAAMA,MAAM,mBAAZ,C;;;;;;;;;;;;;ACHA;;AACA;;AACA;;AACA;;AACA;;2JAZA;;;;;;;;;;AAcA,KAAMC,WAAW,mBAASC,KAA1B;AACA,KAAMC,UAAU;AACZC,iBAAY,CACR,EAACC,KAAK,8BAAN,EADQ;AADA,EAAhB;AAKA,KAAMC,cAAc,EAACC,SAAS,IAAV,EAApB;;KAEqBC,G,GACjB,eAAc;AAAA;;AACV,UAAKC,SAAL,GAAiB,0BAAjB;AACA,UAAKC,MAAL,GAAc,6BAAmBP,OAAnB,EAA4BG,WAA5B,EAAyCL,QAAzC,EAAmD,KAAKQ,SAAxD,CAAd;AACA,UAAKC,MAAL,CAAYC,MAAZ,GAAqB,mBAAWV,QAAX,CAArB;AACA,UAAKW,QAAL,GAAgB,uBAAa,KAAKF,MAAlB,CAAhB;AACA,UAAKG,GAAL,GAAW,2BAAe,KAAKD,QAApB,EAA8B,KAAKH,SAAnC,CAAX;AACA,UAAKK,IAAL,GAAY,eAAS,KAAKF,QAAd,EAAwB,KAAKF,MAAL,CAAYC,MAApC,CAAZ;AACH,E;;mBARgBH,G;AASpB;;;;;;;;;;;;;;;sjBC/BD;;;;;;;;;;AAQA;;;;AAEO,KAAMO,wCAAgB;AACzBC,aAAQ,EADiB;AAEzBC,uBAAkB,KAFO;AAGzBC,kBAAa,KAHY;AAIzBC,mBAAc;AAJW,EAAtB;;KAOMC,S,WAAAA,S;AACT,0BAAc;AAAA;;AACV,cAAKC,EAAL,GAAU,YAAV;AACH;;;;8BAEIC,K,EAAO;AACRA,mBAAMC,MAAN,GAAe,EAACF,IAAI,KAAKA,EAAV,EAAf;;AAEA,qBAAQC,MAAME,IAAd;AACI,sBAAK,6BAAmBC,KAAxB;AACI,0BAAKC,OAAL,CAAaC,KAAb,CAAmB,IAAnB,EAAyB,CAACL,KAAD,CAAzB;AACA;AACJ,sBAAK,6BAAmBM,MAAxB;AACI,0BAAKC,QAAL,CAAcF,KAAd,CAAoB,IAApB,EAA0B,CAACL,KAAD,CAA1B;AACA;AACJ,sBAAK,6BAAmBQ,SAAxB;AACI,0BAAKC,WAAL,CAAiBJ,KAAjB,CAAuB,IAAvB,EAA6B,CAACL,KAAD,CAA7B;AACA;AACJ,sBAAK,6BAAmBU,OAAxB;AACI,0BAAKC,SAAL,CAAeN,KAAf,CAAqB,IAArB,EAA2B,CAACL,KAAD,CAA3B;AACA;AACJ,sBAAK,6BAAmBY,UAAxB;AACI,0BAAKC,YAAL,CAAkBR,KAAlB,CAAwB,IAAxB,EAA8B,CAACL,KAAD,CAA9B;AACA;AAfR;AAiBH;;;mCAESA,K,EAAO;AACb,qBAAQA,MAAME,IAAd;AACI,sBAAK,6BAAmBC,KAAxB;AACI,8CAAeC,OAAf,CAAuBJ,KAAvB;AACA;AACJ,sBAAK,6BAAmBM,MAAxB;AACI,8CAAeC,QAAf,CAAwBP,KAAxB;AACA;AACJ,sBAAK,6BAAmBQ,SAAxB;AACI,8CAAeC,WAAf,CAA2BT,KAA3B;AACA;AATR;AAWH;;;mCAESA,K,EAAO;AACb,sCAAeW,SAAf,CAAyBX,KAAzB;AACH;;;sCAEYA,K,EAAO;AAChB,sCAAea,YAAf,CAA4Bb,KAA5B;AACH;;;qCAEWA,K,EAAO;AACf,iBAAIA,MAAMc,IAAV,EAAgB;AACZrB,+BAAcC,MAAd,CAAqBqB,IAArB,CAA0Bf,KAA1B;AACH,cAFD,MAEO;AACHP,+BAAcE,gBAAd,GAAiC,IAAjC;AACH;AACJ;;;iCAEOK,K,EAAO;AACXP,2BAAcC,MAAd,CAAqBqB,IAArB,CAA0Bf,KAA1B;AACAP,2BAAcG,WAAd,GAA4B,IAA5B;AACH;;;kCAEQI,K,EAAO;AACZP,2BAAcC,MAAd,CAAqBqB,IAArB,CAA0Bf,KAA1B;AACAP,2BAAcI,YAAd,GAA6B,IAA7B;AACH;;;;;;;;;;;;;;;;;;sjBClFL;;;;;;;;;;AAQA;;AACA;;;;KAEamB,M,WAAAA,M;AACT,qBAAYrC,QAAZ,EAAsB;AAAA;;AAClB,cAAKsC,SAAL,GAAiBtC,QAAjB;AACH;;;;8BAEImC,I,EAAM;AACP,kBAAKI,KAAL,CAAWJ,IAAX,EAAiB,MAAjB;AACH;;;6BAEGA,I,EAAM;AACN,kBAAKI,KAAL,CAAWJ,IAAX,EAAiB,KAAjB;AACH;;;8BAEIA,I,EAAM;AACP,kBAAKI,KAAL,CAAWJ,IAAX,EAAiB,MAAjB;AACH;;;+BAEKA,I,EAAM;AACR,kBAAKI,KAAL,CAAWJ,IAAX,EAAiB,OAAjB;AACH;;;+BAEKA,I,EAAMK,M,EAAQ;AAChB,iBAAI,KAAKF,SAAL,KAAmB,mBAASG,GAAhC,EAAqC;AACjC;AACH;AACD,iBAAI,KAAKH,SAAL,KAAmB,mBAASI,IAA5B,IAAoCF,WAAW,OAAnD,EAA4D;AACxD;AACH;AACD,iBAAI,KAAKF,SAAL,KAAmB,mBAASK,IAA5B,KAAqCH,WAAW,OAAX,IAAsBA,WAAW,MAAtE,CAAJ,EAAmF;AAC/E;AACH;AACD,iBAAII,MAAM,IAAIC,IAAJ,EAAV;AACAD,mBAAMA,IAAIE,QAAJ,KAAiB,GAAjB,GAAuBF,IAAIG,UAAJ,EAA7B;AACA,iBAAIZ,gBAAgBa,KAApB,EAA2B;AACvB,sBAAKC,SAAL,CAAeT,MAAf,EAAuBI,MAAM,IAAN,GAAaT,KAAKe,QAAL,EAApC;AACH;AACD,kBAAKD,SAAL,CAAeT,MAAf,EAAuBI,MAAM,IAAN,GAAaT,IAApC;AACH;;;mCAESK,M,EAAQW,O,EAAS;AACvB,iBAAIC,WAAW,mBAAAC,CAAQ,EAAR,CAAf;AACAD,wBAAWA,SAASE,OAAT,CAAiB,eAAjB,EAAkC;AAAA,wBAAQH,OAAR;AAAA,cAAlC,CAAX;AACAC,wBAAWA,SAASE,OAAT,CAAiB,aAAjB,EAAgC;AAAA,wBAAQd,MAAR;AAAA,cAAhC,CAAX;AACAe,sBAASC,aAAT,CAAuB,UAAvB,EAAmCC,SAAnC,IAAgDL,QAAhD;AACA,wBAAKM,UAAL;AACH;;;6BAEc;AACX,oBAAO,KAAKpB,SAAZ;AACH,U;2BAEYqB,K,EAAO;AAChB,kBAAKrB,SAAL,GAAiBqB,KAAjB;AACH;;;;;;;;;;;;;;;;;;sjBChEL;;;;;;;;;;AAQA;;;;KAEaC,I,WAAAA,I;AACT,mBAAYjD,QAAZ,EAAsBD,MAAtB,EAA8B;AAAA;;AAC1B,cAAKC,QAAL,GAAgBA,QAAhB;AACA,cAAKD,MAAL,GAAcA,MAAd;AACA,cAAKmD,aAAL,GAAqB,iBAArB;AACA,cAAKC,eAAL;AACA,cAAKC,IAAL,CAAU,SAAV;AACH;;;;8BAEI3C,E,EAAI;AACL,iBAAI4C,UAAUT,SAASU,cAAT,CAAwB7C,EAAxB,CAAd;AACA4C,qBAAQE,gBAAR,CAAyB,OAAzB,EAAkC,KAAKC,MAAL,CAAYC,IAAZ,CAAiB,IAAjB,CAAlC;;AAEAb,sBAASC,aAAT,CAAuB,KAAKK,aAA5B,EAA2CK,gBAA3C,CAA4D,UAA5D,EAAwE,KAAKG,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAxE;AACH;;;2CAEiB;AACd,kBAAKzD,QAAL,CAAc2D,EAAd,CAAiB,oBAAUC,IAA3B,EAAiC,KAAKC,MAAL,CAAYJ,IAAZ,CAAiB,IAAjB,CAAjC;AACA,kBAAKzD,QAAL,CAAc2D,EAAd,CAAiB,oBAAUG,KAA3B,EAAkC,KAAKC,OAAL,CAAaN,IAAb,CAAkB,IAAlB,CAAlC;AACA,kBAAKzD,QAAL,CAAc2D,EAAd,CAAiB,oBAAUK,IAA3B,EAAiC,KAAKC,MAAL,CAAYR,IAAZ,CAAiB,IAAjB,CAAjC;AACA,kBAAKzD,QAAL,CAAc2D,EAAd,CAAiB,oBAAUrE,KAA3B,EAAkC,KAAK4E,OAAL,CAAaT,IAAb,CAAkB,IAAlB,CAAlC;AACH;;;iCAEO/C,K,EAAO;AACX,iBAAIA,MAAMyD,OAAN,KAAkB,EAAtB,EAA0B;AACtB,sBAAKX,MAAL;AACH;AACJ;;;kCAEQ;AACL,iBAAIhB,UAAUI,SAASC,aAAT,CAAuB,KAAKK,aAA5B,EAA2CF,KAAzD;AACA,kBAAKoB,UAAL;AACA,kBAAKpE,QAAL,CAAcqE,IAAd,CAAmB7B,OAAnB;AACA,kBAAK8B,UAAL,CAAgB9B,OAAhB;AACA,kBAAKO,UAAL;AACH;;;gCAEMrC,K,EAAO;AACV,kBAAKX,MAAL,CAAYwE,IAAZ,CAAiB,kBAAjB;AACH;;;iCAEO7D,K,EAAO;AACX,kBAAKX,MAAL,CAAYwE,IAAZ,CAAiB,gBAAjB;AACH;;;gCAEM7D,K,EAAO;AACV,kBAAK4D,UAAL,CAAgB5D,MAAMc,IAAtB,EAA4B,IAA5B;AACH;;;iCAEOd,K,EAAO;AACX,kBAAKX,MAAL,CAAYyE,KAAZ,CAAkB9D,KAAlB;AACH;;;sCAEY;AACTkC,sBAASC,aAAT,CAAuB,KAAKK,aAA5B,EAA2CF,KAA3C,GAAmD,EAAnD;AACH;;;oCAEUR,O,EAA2B;AAAA,iBAAlBiC,QAAkB,uEAAP,KAAO;;AAClC,iBAAIhC,WAAW,mBAAAC,CAAQ,EAAR,CAAf;AACAD,wBAAWA,SAASE,OAAT,CAAiB,eAAjB,EAAkC;AAAA,wBAAQH,OAAR;AAAA,cAAlC,CAAX;AACAC,wBAAWA,SAASE,OAAT,CAAiB,aAAjB,EAAgC;AAAA,wBAAQ8B,WAAW,QAAX,GAAsB,SAA9B;AAAA,cAAhC,CAAX;AACA7B,sBAASC,aAAT,CAAuB,UAAvB,EAAmCC,SAAnC,IAAgDL,QAAhD;AACH;;;sCAEmB;AAChB,iBAAIiC,OAAO9B,SAASC,aAAT,CAAuB,UAAvB,CAAX;AACA6B,kBAAKC,SAAL,GAAiBD,KAAKE,YAAtB;AACH;;;;;;;;;;;AC7EL,yCAAwC,OAAO,KAAK,SAAS,O;;;;;;;ACA7D,gDAA+C,OAAO,KAAK,SAAS,O;;;;;;;;;;;;;;sjBCApE;;;;;;;;;;AAQA;;AACA;;;;KAEaC,U,WAAAA,U;AACT,yBAAY7E,QAAZ,EAAsBH,SAAtB,EAAiC;AAAA;;AAC7B,cAAKG,QAAL,GAAgBA,QAAhB;AACA,cAAKH,SAAL,GAAiBA,SAAjB;AACA,cAAKuD,IAAL;AACH;;;;gCAEM;AACH,iBAAI0B,QAAQ,KAAKC,QAAL,EAAZ;AACA,iBAAID,KAAJ,EAAW;AACP,4CAAaE,IAAb,CAAkBF,KAAlB,EAAyB,KAAKjF,SAAL,CAAeoF,SAAxC;AACH,cAFD,MAEO;AACH,sBAAKjF,QAAL,CAAckF,OAAd;AACA,4CAAaC,MAAb,CAAoB,aAApB,EAAmC,iBAAS;AACxCvC,8BAASC,aAAT,CAAuB,gBAAvB,EAAyCC,SAAzC,GAAqD,EAArD;AACAsC,uBAAE,YAAF,EAAgBC,KAAhB,CAAsB,MAAtB;AACH,kBAHD;AAIH;;AAED,iBAAIC,UAAU1C,SAASU,cAAT,CAAwB,SAAxB,CAAd;AACAgC,qBAAQ/B,gBAAR,CAAyB,OAAzB,EAAkC,KAAKgC,MAAL,CAAY9B,IAAZ,CAAiB,IAAjB,CAAlC;;AAEA,wCAAa0B,MAAb,CAAoB,YAApB,EAAkC;AAAA,wBAASvC,SAASC,aAAT,CAAuB,eAAvB,EAAwCC,SAAxC,GAAoD,EAA7D;AAAA,cAAlC;AACA,kBAAK0C,SAAL,CAAe,EAAf;AACH;;;mCAESC,C,EAAG;AAAA;;AACTC,wBAAW,YAAM;AACb,qBAAI,2BAAaC,cAAb,OAAkC,IAAlC,IAA0C,EAAEF,CAAhD,EAAmD,MAAKD,SAAL,CAAeC,CAAf;AACtD,cAFD,EAEG,IAFH;AAGH;;;kCAEQ;AACL,iBAAIjE,OAAOoB,SAASC,aAAT,CAAuB,oBAAvB,EAA6CG,KAAxD;AACA,wCAAagC,IAAb,CAAkBxD,IAAlB,EAAwB,KAAK3B,SAAL,CAAeoF,SAAvC;AACAG,eAAE,YAAF,EAAgBC,KAAhB,CAAsB,MAAtB;AACH;;;oCAEU;AACP,oBAAOO,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBC,SAArB,CAA+B,CAA/B,CAAP;AACH;;;;;;;;;;;;;;;;;;;sjBCnDL;;;;;;;;;;AAQA;;;;KAEaC,Y,WAAAA,Y;;;;;;;0CACe;AACpB,iBAAI,yBAAc3F,gBAAd,KAAmC,IAAnC,IAA4C,yBAAcC,WAAd,KAA8B,IAA9B,IAAsC,yBAAcC,YAAd,KAA+B,IAArH,EAA4H;AACxH,wBAAO,KAAP;AACH;;AAED,iBAAI0F,eAAe,yBAAc3F,WAAd,GAA4B,OAA5B,GAAsC,QAAzD;AACA,iBAAIwE,QAAQoB,KAAKC,SAAL,CAAe,yBAAc/F,MAA7B,CAAZ;AACA,iBAAIoB,OAAO,CAAC,yBAAclB,WAAd,GAA4BuF,SAASO,IAAT,GAAgB,GAA5C,GAAkD,EAAnD,IAAyDC,mBAAmBvB,KAAnB,CAApE;;AAEA,iBAAIrC,WAAW,4BAAQ,GAAiBwD,YAAjB,GAAgC,OAAxC,CAAf;;AAEAxD,wBAAWA,SAASE,OAAT,CAAiB,YAAjB,EAA+B;AAAA,wBAAQnB,IAAR;AAAA,cAA/B,CAAX;AACAoB,sBAASC,aAAT,CAAuB,gBAAvB,EAAyCC,SAAzC,IAAsDL,QAAtD;AACA2C,eAAE,aAAF,EAAiBC,KAAjB,CAAuB,MAAvB;;AAEA,oBAAO,IAAP;AACH;;;gCAEaiB,Q,EAAUC,Q,EAAU;AAC9BnB,eAAEkB,QAAF,EAAY3C,EAAZ,CAAe,eAAf,EAAgC4C,QAAhC;AACH;;;;;;;;;;;;AC/BL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAiC,uDAAuD;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClBA,uEAAsE,MAAM,K;;;;;;;ACA5E,o/EAAm/E,2wBAA2wB,iuB;;;;;;;ACA9vG,6EAA4E,MAAM,KAAK,MAAM,K;;;;;;;;;;;;;;;;;ACA7F;;;;;;;;;KASaC,Y,WAAAA,Y;;;;;;;8BACGhF,I,EAAM+E,Q,EAAU;AACxB,iBAAInG,SAAS8F,KAAKO,KAAL,CAAWC,mBAAmBlF,IAAnB,CAAX,CAAb;AACA,kBAAK,IAAIiE,IAAI,CAAb,EAAgBA,IAAIrF,OAAOuG,MAA3B,EAAmClB,GAAnC,EAAwC;AACpCc,0BAASnG,OAAOqF,CAAP,CAAT;AACH;AACJ;;;;;;;;;;;ACfL,0C","file":"js/app.js","sourcesContent":["/**\n * This file is part of the noggin package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport App from \"./app/app.js\";\nimport \"./styles/app.scss\";\n\nconst app = new App();\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {PeerData, PeerDataConfig, LogLevel} from \"peer-data\";\nimport {Signaling} from \"./signaling\";\nimport {Logger} from \"./logger\";\nimport {GuiManager} from \"./gui-manager\";\nimport {Chat} from \"./chat\";\n\nconst logLevel = LogLevel.ERROR;\nconst servers = {\n    iceServers: [\n        {url: \"stun:stun.1.google.com:19302\"}\n    ]\n};\nconst constraints = {ordered: true};\n\nexport default class App {\n    constructor() {\n        this.signaling = new Signaling();\n        this.config = new PeerDataConfig(servers, constraints, logLevel, this.signaling);\n        this.config.logger = new Logger(logLevel);\n        this.peerData = new PeerData(this.config);\n        this.gui = new GuiManager(this.peerData, this.signaling);\n        this.chat = new Chat(this.peerData, this.config.logger);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {PeerDataBridge, SignalingEventType} from \"peer-data\";\n\nexport const SignalingData = {\n    events: [],\n    candidatesLoaded: false,\n    offerLoaded: false,\n    answerLoaded: false\n};\n\nexport class Signaling {\n    constructor() {\n        this.id = 'singlePeer';\n    }\n\n    send(event) {\n        event.caller = {id: this.id};\n\n        switch (event.type) {\n            case SignalingEventType.OFFER:\n                this.onOffer.apply(this, [event]);\n                break;\n            case SignalingEventType.ANSWER:\n                this.onAnswer.apply(this, [event]);\n                break;\n            case SignalingEventType.CANDIDATE:\n                this.onCandidate.apply(this, [event]);\n                break;\n            case SignalingEventType.CONNECT:\n                this.onConnect.apply(this, [event]);\n                break;\n            case SignalingEventType.DISCONNECT:\n                this.onDisconnect.apply(this, [event]);\n                break;\n        }\n    }\n\n    onMessage(event) {\n        switch (event.type) {\n            case SignalingEventType.OFFER:\n                PeerDataBridge.onOffer(event);\n                break;\n            case SignalingEventType.ANSWER:\n                PeerDataBridge.onAnswer(event);\n                break;\n            case SignalingEventType.CANDIDATE:\n                PeerDataBridge.onCandidate(event);\n                break;\n        }\n    }\n\n    onConnect(event) {\n        PeerDataBridge.onConnect(event);\n    }\n\n    onDisconnect(event) {\n        PeerDataBridge.onDisconnect(event);\n    }\n\n    onCandidate(event) {\n        if (event.data) {\n            SignalingData.events.push(event);\n        } else {\n            SignalingData.candidatesLoaded = true;\n        }\n    }\n\n    onOffer(event) {\n        SignalingData.events.push(event);\n        SignalingData.offerLoaded = true;\n    }\n\n    onAnswer(event) {\n        SignalingData.events.push(event);\n        SignalingData.answerLoaded = true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/signaling.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {LogLevel} from \"peer-data\";\nimport {Chat} from \"./chat\";\n\nexport class Logger {\n    constructor(logLevel) {\n        this._logLevel = logLevel;\n    }\n\n    info(data) {\n        this.trace(data, 'info');\n    }\n\n    log(data) {\n        this.trace(data, 'log');\n    }\n\n    warn(data) {\n        this.trace(data, 'warn');\n    }\n\n    error(data) {\n        this.trace(data, 'error');\n    }\n\n    trace(data, method) {\n        if (this._logLevel === LogLevel.OFF) {\n            return;\n        }\n        if (this._logLevel === LogLevel.WARN && method === 'error') {\n            return;\n        }\n        if (this._logLevel === LogLevel.INFO && (method === 'error' || method === 'warn')) {\n            return;\n        }\n        let now = new Date();\n        now = now.getHours() + '.' + now.getMinutes();\n        if (data instanceof Error) {\n            this.logToChat(method, now + ': ' + data.toString());\n        }\n        this.logToChat(method, now + ': ' + data);\n    }\n\n    logToChat(method, message) {\n        let template = require('./../public/system-message.html');\n        template = template.replace(/{{message}}/gi, prop => message);\n        template = template.replace(/{{class}}/gi, prop => method);\n        document.querySelector('div.chat').innerHTML += template;\n        Chat.scrollDown();\n    }\n\n    get logLevel() {\n        return this._logLevel;\n    }\n\n    set logLevel(value) {\n        this._logLevel = value;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/logger.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {EventType} from \"peer-data\";\n\nexport class Chat {\n    constructor(peerData, logger) {\n        this.peerData = peerData;\n        this.logger = logger;\n        this.inputSelector = 'input#sendInput';\n        this.subscribeEvents();\n        this.init('sendBtn');\n    }\n\n    init(id) {\n        let sendBtn = document.getElementById(id);\n        sendBtn.addEventListener('click', this.onSend.bind(this));\n\n        document.querySelector(this.inputSelector).addEventListener('keypress', this.onEnter.bind(this));\n    }\n\n    subscribeEvents() {\n        this.peerData.on(EventType.OPEN, this.onOpen.bind(this));\n        this.peerData.on(EventType.CLOSE, this.onClose.bind(this));\n        this.peerData.on(EventType.DATA, this.onData.bind(this));\n        this.peerData.on(EventType.ERROR, this.onError.bind(this));\n    }\n\n    onEnter(event) {\n        if (event.keyCode === 13) {\n            this.onSend()\n        }\n    }\n\n    onSend() {\n        let message = document.querySelector(this.inputSelector).value;\n        this.clearInput();\n        this.peerData.send(message);\n        this.addMessage(message);\n        this.scrollDown();\n    }\n\n    onOpen(event) {\n        this.logger.info('User joined chat');\n    }\n\n    onClose(event) {\n        this.logger.info('User left chat');\n    }\n\n    onData(event) {\n        this.addMessage(event.data, true);\n    }\n\n    onError(event) {\n        this.logger.error(event);\n    }\n\n    clearInput() {\n        document.querySelector(this.inputSelector).value = '';\n    }\n\n    addMessage(message, incoming = false) {\n        let template = require('./../public/message.html');\n        template = template.replace(/{{message}}/gi, prop => message);\n        template = template.replace(/{{class}}/gi, prop => incoming ? 'income' : 'outcome');\n        document.querySelector('div.chat').innerHTML += template;\n    }\n\n    static scrollDown() {\n        let elem = document.querySelector('div.chat');\n        elem.scrollTop = elem.scrollHeight;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/chat.js","module.exports = \"<div class=\\\"bubble {{class}}\\\">{{message}}</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/message.html\n// module id = 73\n// module chunks = 0","module.exports = \"<div class=\\\"bubble system {{class}}\\\">{{message}}</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/system-message.html\n// module id = 74\n// module chunks = 0","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {ModalManager} from \"./modal-manager\";\nimport {EventsLoader} from \"./events-loader\";\n\nexport class GuiManager {\n    constructor(peerData, signaling) {\n        this.peerData = peerData;\n        this.signaling = signaling;\n        this.init();\n    }\n\n    init() {\n        let token = this.getToken();\n        if (token) {\n            EventsLoader.load(token, this.signaling.onMessage);\n        } else {\n            this.peerData.connect();\n            ModalManager.onHide('#shareModal', event => {\n                document.querySelector('div#share-info').innerHTML = '';\n                $('#loadModal').modal('show');\n            });\n        }\n\n        let loadBtn = document.getElementById('loadBtn');\n        loadBtn.addEventListener('click', this.onLoad.bind(this));\n\n        ModalManager.onHide('#loadModal', event => document.querySelector('div#load-info').innerHTML = '');\n        this.modalLoop(10)\n    }\n\n    modalLoop(i) {\n        setTimeout(() => {\n            if (ModalManager.showShareModal() !== true && --i) this.modalLoop(i);\n        }, 1000)\n    }\n\n    onLoad() {\n        let data = document.querySelector('textarea#loadInput').value;\n        EventsLoader.load(data, this.signaling.onMessage);\n        $('#loadModal').modal('hide');\n    }\n\n    getToken() {\n        return window.location.hash.substring(1);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/gui-manager.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {SignalingData} from \"./signaling\";\n\nexport class ModalManager {\n    static showShareModal() {\n        if (SignalingData.candidatesLoaded !== true || (SignalingData.offerLoaded !== true && SignalingData.answerLoaded !== true)) {\n            return false;\n        }\n\n        let templateName = SignalingData.offerLoaded ? 'offer' : 'answer';\n        let token = JSON.stringify(SignalingData.events);\n        let data = (SignalingData.offerLoaded ? location.href + '#' : '') + encodeURIComponent(token);\n\n        let template = require('./../public/' + templateName + '.html');\n\n        template = template.replace(/{{data}}/gi, prop => data);\n        document.querySelector('div#share-info').innerHTML += template;\n        $('#shareModal').modal('show');\n\n        return true;\n    }\n\n    static onHide(selector, callback) {\n        $(selector).on('hide.bs.modal', callback);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modal-manager.js","var map = {\n\t\"./answer.html\": 79,\n\t\"./index.html\": 80,\n\t\"./message.html\": 73,\n\t\"./offer.html\": 81,\n\t\"./system-message.html\": 74\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 78;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public ^\\.\\/.*\\.html$\n// module id = 78\n// module chunks = 0","module.exports = \"<h1>Share this token with the other side</h1>\\n<p>{{data}}</p>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/answer.html\n// module id = 79\n// module chunks = 0","module.exports = \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"utf-8\\\">\\n    <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge,chrome=1\\\">\\n\\n    <meta name=\\\"description\\\" content=\\\"Serverless chat application using peer to peer WebRTC\\\">\\n    <meta name=\\\"keywords\\\"\\n          content=\\\"HTML, HTML5, CSS, CSS3, XML, XHTML, JavaScript, EcmaScript, EcmaScript6, Rafa≈Ç, Lorenz, WebRTC, real, time, communication\\\">\\n    <meta name=\\\"author\\\" content=\\\"Rafa≈Ç Lorenz\\\">\\n    <meta name=\\\"copyright\\\" content=\\\"Rafa≈Ç Lorenz\\\"/>\\n</head>\\n<body>\\n<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <button type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" data-toggle=\\\"collapse\\\"\\n                    data-target=\\\"#bs-example-navbar-collapse-1\\\" aria-expanded=\\\"false\\\">\\n                <span class=\\\"sr-only\\\">Toggle navigation</span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n            </button>\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">WebRTC Chat</a>\\n        </div>\\n    </div>\\n</nav>\\n<div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-12\\\">\\n            <div class=\\\"row\\\">\\n                <div class=\\\"col-lg-12\\\">\\n                    <div class=\\\"chat\\\"></div>\\n                </div>\\n            </div>\\n            <div class=\\\"row\\\">\\n                <div class=\\\"col-lg-12\\\">\\n                    <div class=\\\"input-group send-group\\\">\\n                        <input id=\\\"sendInput\\\" class=\\\"form-control\\\"\\n                               placeholder=\\\"Type your message here...\\\">\\n                        <span class=\\\"input-group-btn\\\">\\n                            <button id=\\\"sendBtn\\\" class=\\\"btn btn-default\\\" type=\\\"button\\\">\\n                                <i class=\\\"fa fa-paper-plane-o\\\" aria-hidden=\\\"true\\\"></i>\\n                            </button>\\n                        </span>\\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div id=\\\"shareModal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div class=\\\"modal-header\\\">\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span\\n                        aria-hidden=\\\"true\\\">&times;</span></button>\\n                <h4 class=\\\"modal-title\\\">Share Offer</h4>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <div id=\\\"share-info\\\"></div>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div id=\\\"loadModal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div class=\\\"modal-header\\\">\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span\\n                        aria-hidden=\\\"true\\\">&times;</span></button>\\n                <h4 class=\\\"modal-title\\\">Load Answer</h4>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <div id=\\\"load-info\\\">\\n                    <h1>Paste here token from other side</h1>\\n                </div>\\n\\n                <textarea id=\\\"loadInput\\\" class=\\\"form-control\\\" placeholder=\\\"Paste here...\\\"></textarea>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\n                <button id=\\\"loadBtn\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\">Load</button>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n</body>\\n</html>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/index.html\n// module id = 80\n// module chunks = 0","module.exports = \"<h1>Share this link with the other side</h1>\\n<a href=\\\"{{data}}\\\">{{data}}</a>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/offer.html\n// module id = 81\n// module chunks = 0","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafa≈Ç Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport class EventsLoader {\n    static load(data, callback) {\n        let events = JSON.parse(decodeURIComponent(data));\n        for (let i = 0; i < events.length; i++) {\n            callback(events[i]);\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/events-loader.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/app.scss\n// module id = 83\n// module chunks = 0"],"sourceRoot":""}