{"version":3,"sources":["webpack:///./src/main.js","webpack:///./src/app/app.js","webpack:///./src/app/signaling.js","webpack:///./src/app/logger.js","webpack:///./src/app/chat.js","webpack:///./src/app/modal-manager.js","webpack:///./src/public ^\\.\\/.*\\.html$","webpack:///./src/public/answer.html","webpack:///./src/public/index.html","webpack:///./src/public/message.html","webpack:///./src/public/offer.html","webpack:///./src/public/system-message.html","webpack:///./src/app/events.js","webpack:///./src/styles/app.scss"],"names":["app","servers","iceServers","url","constraints","ordered","logLevel","ERROR","logger","signaling","App","config","peerData","chat","SignalingData","events","candidatesLoaded","offerLoaded","answerLoaded","Signaling","id","event","caller","type","OFFER","onOffer","apply","ANSWER","onAnswer","CANDIDATE","onCandidate","CONNECT","onConnect","DISCONNECT","onDisconnect","data","push","Logger","_logLevel","trace","method","OFF","WARN","INFO","now","Date","getHours","getMinutes","Error","logToChat","toString","message","template","require","replace","document","querySelector","innerHTML","scrollDown","value","Chat","inputSelector","subscribeEvents","init","token","getToken","load","onMessage","connect","onHide","$","modal","loadBtn","getElementById","addEventListener","onLoad","bind","modalLoop","sendBtn","onSend","onKeyPress","on","OPEN","CLOSE","DATA","keyCode","send","i","setTimeout","showShareModal","window","location","hash","substring","length","clearInput","constructor","addMessage","incoming","elem","scrollTop","scrollHeight","ModalManager","templateName","JSON","stringify","href","encodeURIComponent","selector","callback","onOpen","onClose","onData","onError","EventsLoader","parse","decodeURIComponent","info","error"],"mappings":"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","file":"js/app.js","sourcesContent":["/**\n * This file is part of the noggin package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport App from \"./app/app.js\";\nimport \"./styles/app.scss\";\n\nconst app = new App();\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {PeerData, PeerDataConfig, LogLevel} from \"peer-data\";\nimport {Signaling} from \"./signaling\";\nimport {Logger} from \"./logger\";\nimport {Chat} from \"./chat\";\n\nconst servers = {\n    iceServers: [\n        {url: \"stun:stun.1.google.com:19302\"}\n    ]\n};\nconst constraints = {ordered: true};\nconst logLevel = LogLevel.ERROR;\n\nexport const logger = new Logger(logLevel);\nexport const signaling = new Signaling();\n\nexport default class App {\n    constructor() {\n        this.config = new PeerDataConfig(servers, constraints, logLevel, signaling);\n        this.config.logger = logger;\n        this.peerData = new PeerData(this.config);\n        this.chat = new Chat(this.peerData);\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {PeerDataBridge, SignalingEventType} from \"peer-data\";\n\nexport const SignalingData = {\n    events: [],\n    candidatesLoaded: false,\n    offerLoaded: false,\n    answerLoaded: false\n};\n\nexport class Signaling {\n    constructor() {\n        this.id = 'singlePeer';\n    }\n\n    send(event) {\n        event.caller = {id: this.id};\n\n        switch (event.type) {\n            case SignalingEventType.OFFER:\n                this.onOffer.apply(this, [event]);\n                break;\n            case SignalingEventType.ANSWER:\n                this.onAnswer.apply(this, [event]);\n                break;\n            case SignalingEventType.CANDIDATE:\n                this.onCandidate.apply(this, [event]);\n                break;\n            case SignalingEventType.CONNECT:\n                this.onConnect.apply(this, [event]);\n                break;\n            case SignalingEventType.DISCONNECT:\n                this.onDisconnect.apply(this, [event]);\n                break;\n        }\n    }\n\n    onMessage(event) {\n        switch (event.type) {\n            case SignalingEventType.OFFER:\n                PeerDataBridge.onOffer(event);\n                break;\n            case SignalingEventType.ANSWER:\n                PeerDataBridge.onAnswer(event);\n                break;\n            case SignalingEventType.CANDIDATE:\n                PeerDataBridge.onCandidate(event);\n                break;\n        }\n    }\n\n    onConnect(event) {\n        PeerDataBridge.onConnect(event);\n    }\n\n    onDisconnect(event) {\n        PeerDataBridge.onDisconnect(event);\n    }\n\n    onCandidate(event) {\n        if (event.data) {\n            SignalingData.events.push(event);\n        } else {\n            SignalingData.candidatesLoaded = true;\n        }\n    }\n\n    onOffer(event) {\n        SignalingData.events.push(event);\n        SignalingData.offerLoaded = true;\n    }\n\n    onAnswer(event) {\n        SignalingData.events.push(event);\n        SignalingData.answerLoaded = true;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/signaling.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {LogLevel} from \"peer-data\";\nimport {Chat} from \"./chat\";\n\nexport class Logger {\n    constructor(logLevel) {\n        this._logLevel = logLevel;\n    }\n\n    info(data) {\n        this.trace(data, 'info');\n    }\n\n    log(data) {\n        this.trace(data, 'log');\n    }\n\n    warn(data) {\n        this.trace(data, 'warn');\n    }\n\n    error(data) {\n        this.trace(data, 'error');\n    }\n\n    trace(data, method) {\n        if (this._logLevel === LogLevel.OFF) {\n            return;\n        }\n        if (this._logLevel === LogLevel.WARN && method === 'error') {\n            return;\n        }\n        if (this._logLevel === LogLevel.INFO && (method === 'error' || method === 'warn')) {\n            return;\n        }\n        let now = new Date();\n        now = now.getHours() + '.' + now.getMinutes();\n        if (data instanceof Error) {\n            this.logToChat(method, now + ': ' + data.toString());\n        }\n        this.logToChat(method, now + ': ' + data);\n    }\n\n    logToChat(method, message) {\n        let template = require('./../public/system-message.html');\n        template = template.replace(/{{message}}/gi, prop => message);\n        template = template.replace(/{{class}}/gi, prop => method);\n        document.querySelector('div.chat').innerHTML += template;\n        Chat.scrollDown();\n    }\n\n    get logLevel() {\n        return this._logLevel;\n    }\n\n    set logLevel(value) {\n        this._logLevel = value;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/logger.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {EventType} from \"peer-data\";\nimport {ModalManager} from \"./modal-manager\";\nimport {signaling} from \"./app\";\nimport {EventsLoader, onOpen, onClose, onData, onError} from \"./events\";\n\nexport class Chat {\n    constructor(peerData) {\n        this.peerData = peerData;\n        this.inputSelector = 'input#sendInput';\n        this.subscribeEvents();\n        this.init('sendBtn');\n    }\n\n    init(id) {\n        let token = this.getToken();\n        if (token) {\n            EventsLoader.load(token, signaling.onMessage);\n        } else {\n            this.peerData.connect();\n            ModalManager.onHide('#shareModal', event => {\n                document.querySelector('div#share-info').innerHTML = '';\n                $('#loadModal').modal('show');\n            });\n        }\n\n        let loadBtn = document.getElementById('loadBtn');\n        loadBtn.addEventListener('click', this.onLoad.bind(this));\n\n        ModalManager.onHide('#loadModal', event => document.querySelector('div#load-info').innerHTML = '');\n        this.modalLoop(10);\n\n        let sendBtn = document.getElementById(id);\n        sendBtn.addEventListener('click', this.onSend.bind(this));\n\n        document.querySelector(this.inputSelector).addEventListener('keypress', this.onKeyPress.bind(this));\n    }\n\n    subscribeEvents() {\n        this.peerData.on(EventType.OPEN, onOpen);\n        this.peerData.on(EventType.CLOSE, onClose);\n        this.peerData.on(EventType.DATA, onData);\n        this.peerData.on(EventType.ERROR, onError);\n    }\n\n    onKeyPress(event) {\n        if (event.keyCode === 13) {\n            let message = document.querySelector(this.inputSelector).value;\n            this.send(message);\n        }\n    }\n\n    onSend() {\n        let message = document.querySelector(this.inputSelector).value;\n        this.send(message);\n    }\n\n    onLoad() {\n        let data = document.querySelector('textarea#loadInput').value;\n        EventsLoader.load(data, signaling.onMessage);\n        $('#loadModal').modal('hide');\n    }\n\n    modalLoop(i) {\n        setTimeout(() => {\n            if (ModalManager.showShareModal() !== true && --i) this.modalLoop(i);\n        }, 1000)\n    }\n\n    getToken() {\n        return window.location.hash.substring(1);\n    }\n\n    clearInput() {\n        document.querySelector(this.inputSelector).value = '';\n    }\n\n    send(message) {\n        if (message.length > 0) {\n            this.clearInput();\n            this.peerData.send(message);\n            this.constructor.addMessage(message);\n            this.constructor.scrollDown();\n        }\n    }\n\n    static addMessage(message, incoming = false) {\n        let template = require('./../public/message.html');\n        template = template.replace(/{{message}}/gi, prop => message);\n        template = template.replace(/{{class}}/gi, prop => incoming ? 'income' : 'outcome');\n        document.querySelector('div.chat').innerHTML += template;\n    }\n\n    static scrollDown() {\n        let elem = document.querySelector('div.chat');\n        elem.scrollTop = elem.scrollHeight;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/chat.js","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {SignalingData} from \"./signaling\";\n\nexport class ModalManager {\n    static showShareModal() {\n        if (SignalingData.candidatesLoaded !== true || (SignalingData.offerLoaded !== true && SignalingData.answerLoaded !== true)) {\n            return false;\n        }\n\n        let templateName = SignalingData.offerLoaded ? 'offer' : 'answer';\n        let token = JSON.stringify(SignalingData.events);\n        let data = (SignalingData.offerLoaded ? location.href + '#' : '') + encodeURIComponent(token);\n\n        let template = require('./../public/' + templateName + '.html');\n\n        template = template.replace(/{{data}}/gi, prop => data);\n        document.querySelector('div#share-info').innerHTML += template;\n        $('#shareModal').modal('show');\n\n        return true;\n    }\n\n    static onHide(selector, callback) {\n        $(selector).on('hide.bs.modal', callback);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/modal-manager.js","var map = {\n\t\"./answer.html\": 76,\n\t\"./index.html\": 77,\n\t\"./message.html\": 78,\n\t\"./offer.html\": 79,\n\t\"./system-message.html\": 80\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 75;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public ^\\.\\/.*\\.html$\n// module id = 75\n// module chunks = 0","module.exports = \"<h1>Share this token with the other side</h1>\\n<p>{{data}}</p>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/answer.html\n// module id = 76\n// module chunks = 0","module.exports = \"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"utf-8\\\">\\n    <meta http-equiv=\\\"X-UA-Compatible\\\" content=\\\"IE=edge,chrome=1\\\">\\n\\n    <meta name=\\\"description\\\" content=\\\"Serverless chat application using peer to peer WebRTC\\\">\\n    <meta name=\\\"keywords\\\"\\n          content=\\\"HTML, HTML5, CSS, CSS3, XML, XHTML, JavaScript, EcmaScript, EcmaScript6, Rafał, Lorenz, WebRTC, real, time, communication\\\">\\n    <meta name=\\\"author\\\" content=\\\"Rafał Lorenz\\\">\\n    <meta name=\\\"copyright\\\" content=\\\"Rafał Lorenz\\\"/>\\n</head>\\n<body>\\n<nav class=\\\"navbar navbar-default\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div class=\\\"navbar-header\\\">\\n            <button type=\\\"button\\\" class=\\\"navbar-toggle collapsed\\\" data-toggle=\\\"collapse\\\"\\n                    data-target=\\\"#bs-example-navbar-collapse-1\\\" aria-expanded=\\\"false\\\">\\n                <span class=\\\"sr-only\\\">Toggle navigation</span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n                <span class=\\\"icon-bar\\\"></span>\\n            </button>\\n            <a class=\\\"navbar-brand\\\" href=\\\"#\\\">WebRTC Chat</a>\\n        </div>\\n    </div>\\n</nav>\\n<div class=\\\"container\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-xs-12 col-sm-4 col-md-4 col-lg-4\\\">\\n            <div class=\\\"list-group\\\">\\n                <a href=\\\"#\\\" class=\\\"list-group-item active\\\">\\n                    <h4 class=\\\"list-group-item-heading\\\">John Doe</h4>\\n                    <p class=\\\"list-group-item-text\\\">Sample last message...</p>\\n                </a>\\n            </div>\\n        </div>\\n        <div class=\\\"col-xs-12 col-sm-8 col-md-8 col-lg-8\\\">\\n            <div class=\\\"chat\\\"></div>\\n            <div class=\\\"input-group send-group\\\">\\n                <input id=\\\"sendInput\\\" class=\\\"form-control\\\"\\n                       placeholder=\\\"Type your message here...\\\">\\n                <span class=\\\"input-group-btn\\\">\\n                    <button id=\\\"sendBtn\\\" class=\\\"btn btn-default\\\" type=\\\"button\\\">\\n                        <i class=\\\"fa fa-paper-plane-o\\\" aria-hidden=\\\"true\\\"></i>\\n                    </button>\\n                </span>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div id=\\\"shareModal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div class=\\\"modal-header\\\">\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span\\n                        aria-hidden=\\\"true\\\">&times;</span></button>\\n                <h4 class=\\\"modal-title\\\">Share Offer</h4>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <div id=\\\"share-info\\\"></div>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n\\n<div id=\\\"loadModal\\\" class=\\\"modal fade\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\">\\n    <div class=\\\"modal-dialog\\\" role=\\\"document\\\">\\n        <div class=\\\"modal-content\\\">\\n            <div class=\\\"modal-header\\\">\\n                <button type=\\\"button\\\" class=\\\"close\\\" data-dismiss=\\\"modal\\\" aria-label=\\\"Close\\\"><span\\n                        aria-hidden=\\\"true\\\">&times;</span></button>\\n                <h4 class=\\\"modal-title\\\">Load Answer</h4>\\n            </div>\\n            <div class=\\\"modal-body\\\">\\n                <div id=\\\"load-info\\\">\\n                    <h1>Paste here token from other side</h1>\\n                </div>\\n\\n                <textarea id=\\\"loadInput\\\" class=\\\"form-control\\\" placeholder=\\\"Paste here...\\\"></textarea>\\n            </div>\\n            <div class=\\\"modal-footer\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-default\\\" data-dismiss=\\\"modal\\\">Close</button>\\n                <button id=\\\"loadBtn\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\" data-dismiss=\\\"modal\\\">Load</button>\\n            </div>\\n        </div>\\n    </div>\\n</div>\\n</body>\\n</html>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/index.html\n// module id = 77\n// module chunks = 0","module.exports = \"<div class=\\\"bubble {{class}}\\\">{{message}}</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/message.html\n// module id = 78\n// module chunks = 0","module.exports = \"<h1>Share this link with the other side</h1>\\n<a href=\\\"{{data}}\\\">{{data}}</a>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/offer.html\n// module id = 79\n// module chunks = 0","module.exports = \"<div class=\\\"bubble system {{class}}\\\">{{message}}</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/public/system-message.html\n// module id = 80\n// module chunks = 0","/**\n * This file is part of the webrtc-chat package.\n *\n * (c) Rafał Lorenz <vardius@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\nimport {logger} from \"./app\";\nimport {Chat} from \"./chat\";\n\nexport class EventsLoader {\n    static load(data, callback) {\n        let events = JSON.parse(decodeURIComponent(data));\n        for (let i = 0; i < events.length; i++) {\n            callback(events[i]);\n        }\n    }\n}\n\nexport function onOpen() {\n    logger.info('User joined chat');\n}\n\nexport function onClose() {\n    logger.info('User left chat');\n}\n\nexport function onData(event) {\n    Chat.addMessage(event.data, true);\n}\n\nexport function onError(event) {\n    logger.error(event);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/events.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/styles/app.scss\n// module id = 82\n// module chunks = 0"],"sourceRoot":""}